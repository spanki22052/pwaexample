# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä

–î–ª—è –¥–µ–ø–ª–æ—è –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä `http://109.205.212.29` –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–¥–∏–Ω –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö —Å–ø–æ—Å–æ–±–æ–≤:

### –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π

```bash
./deploy-prod.sh
```

### –ü–æ–ª–Ω—ã–π –¥–µ–ø–ª–æ–π —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏

```bash
./deploy-production.sh
```

## –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –¥–µ–ø–ª–æ–µ

1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è** –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω:

   - `NODE_ENV=production`
   - `REACT_APP_ENV=production`
   - `REACT_APP_API_URL=http://109.205.212.29`
   - `REACT_APP_WS_URL=ws://109.205.212.29`

2. **–°–±–æ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** —Å –ø—Ä–æ–¥–∞–∫—à–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
3. **–ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–æ–≤** —Å –Ω–æ–≤—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
4. **–ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤** –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä–µ

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ä–µ–¥

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (localhost)

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ hostname –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:

- API: `http://localhost:3001`
- WebSocket: `ws://localhost:3000`

### –ü—Ä–æ–¥–∞–∫—à–Ω (109.205.212.29)

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ hostname –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º –æ–∫—Ä—É–∂–µ–Ω–∏—è:

- API: `http://109.205.212.29`
- WebSocket: `ws://109.205.212.29`

## –§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

- `config.js` - –æ—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —Å—Ä–µ–¥—ã
- `docker-compose.prod.yml` - Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω
- `env.production.example` - –ø—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

## –ü–æ—Ä—Ç—ã

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

- React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: `http://localhost:3000`
- API —Å–µ—Ä–≤–µ—Ä: `http://localhost:3001`

### –ü—Ä–æ–¥–∞–∫—à–Ω

- React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: `http://109.205.212.29:80` (–æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ä—Ç)
- API —Å–µ—Ä–≤–µ—Ä: `http://109.205.212.29:3001`

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose -f docker-compose.prod.yml logs -f

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose -f docker-compose.prod.yml down

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker-compose -f docker-compose.prod.yml restart

# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose -f docker-compose.prod.yml ps
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**: `http://109.205.212.29`
2. **API –∑–¥–æ—Ä–æ–≤—å–µ**: `http://109.205.212.29:3001/api/files`
3. **–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤**: `http://109.205.212.29:3001/api/upload`

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ä–µ–¥—ã

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ä–µ–¥—É –ø–æ:

1. –ü–µ—Ä–µ–º–µ–Ω–Ω–æ–π `REACT_APP_ENV`
2. –ü–µ—Ä–µ–º–µ–Ω–Ω–æ–π `NODE_ENV`
3. Hostname (localhost = dev, –æ—Å—Ç–∞–ª—å–Ω–æ–µ = prod)

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–í `public/index.html` –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã CSP –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –æ–±–µ–∏—Ö —Å—Ä–µ–¥:

```
connect-src 'self' http://localhost:3001 ws://localhost:3000 http://109.205.212.29 ws://109.205.212.29;
```

## Troubleshooting

### –ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker-compose -f docker-compose.prod.yml logs`
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–æ—Ä—Ç—ã 80 –∏ 3001 —Å–≤–æ–±–æ–¥–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

### –ï—Å–ª–∏ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ API —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3001
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ firewall —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CSP –ø—Ä–∞–≤–∏–ª–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

### –ï—Å–ª–∏ —Ñ–∞–π–ª—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–∞–ø–∫–∞ `uploads` –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–∞–ø–∫–µ `uploads`
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ API URL –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω
