{"ast":null,"code":"// –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º–∏ PWA\n\n/**\n * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É Permissions API\n */\nexport const isPermissionsAPISupported = () => {\n  return \"permissions\" in navigator;\n};\n\n/**\n * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É getUserMedia (–∫–∞–º–µ—Ä–∞/–º–∏–∫—Ä–æ—Ñ–æ–Ω)\n */\nexport const isGetUserMediaSupported = () => {\n  return !!(navigator.mediaDevices && navigator.mediaDevices.getUserMedia);\n};\n\n/**\n * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è\n * @param {string} permission - –ù–∞–∑–≤–∞–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è ('camera', 'microphone', 'notifications', etc.)\n * @returns {Promise<string>} - 'granted', 'denied', 'prompt', –∏–ª–∏ 'unsupported'\n */\nexport const checkPermission = async permission => {\n  if (!isPermissionsAPISupported()) {\n    console.log(\"Permissions API –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è\");\n    return \"unsupported\";\n  }\n  try {\n    const result = await navigator.permissions.query({\n      name: permission\n    });\n    return result.state;\n  } catch (error) {\n    console.error(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è ${permission}:`, error);\n    return \"unsupported\";\n  }\n};\n\n/**\n * –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ\n * @param {Object} constraints - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è –∫–∞–º–µ—Ä—ã\n * @returns {Promise<Object>} - { success: boolean, stream?: MediaStream, error?: string }\n */\nexport const requestCameraAccess = async (constraints = {}) => {\n  if (!isGetUserMediaSupported()) {\n    return {\n      success: false,\n      error: \"getUserMedia –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ —ç—Ç–æ–º –±—Ä–∞—É–∑–µ—Ä–µ\"\n    };\n  }\n  const defaultConstraints = {\n    video: {\n      facingMode: \"environment\",\n      // –ó–∞–¥–Ω—è—è –∫–∞–º–µ—Ä–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é\n      width: {\n        ideal: 1280\n      },\n      height: {\n        ideal: 720\n      }\n    },\n    audio: false\n  };\n  const finalConstraints = {\n    ...defaultConstraints,\n    ...constraints\n  };\n  try {\n    const stream = await navigator.mediaDevices.getUserMedia(finalConstraints);\n    return {\n      success: true,\n      stream: stream\n    };\n  } catch (error) {\n    let errorMessage = \"–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ\";\n    switch (error.name) {\n      case \"NotAllowedError\":\n        errorMessage = \"–î–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ –∑–∞–ø—Ä–µ—â–µ–Ω. –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±—Ä–∞—É–∑–µ—Ä–∞.\";\n        break;\n      case \"NotFoundError\":\n        errorMessage = \"–ö–∞–º–µ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –Ω–∞ —ç—Ç–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ\";\n        break;\n      case \"NotReadableError\":\n        errorMessage = \"–ö–∞–º–µ—Ä–∞ –∑–∞–Ω—è—Ç–∞ –¥—Ä—É–≥–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º\";\n        break;\n      case \"OverconstrainedError\":\n        errorMessage = \"–ó–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–∞–º–µ—Ä—ã –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è\";\n        break;\n      case \"SecurityError\":\n        errorMessage = \"–î–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –ø–æ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS.\";\n        break;\n      case \"AbortError\":\n        errorMessage = \"–ó–∞–ø—Ä–æ—Å –∫ –∫–∞–º–µ—Ä–µ –±—ã–ª –ø—Ä–µ—Ä–≤–∞–Ω\";\n        break;\n      default:\n        errorMessage = \"–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ\";\n        break;\n    }\n    return {\n      success: false,\n      error: errorMessage\n    };\n  }\n};\n\n/**\n * –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è\n * @returns {Promise<string>} - 'granted', 'denied', –∏–ª–∏ 'default'\n */\nexport const requestNotificationPermission = async () => {\n  if (!(\"Notification\" in window)) {\n    console.log(\"–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è\");\n    return \"unsupported\";\n  }\n  if (Notification.permission === \"granted\") {\n    return \"granted\";\n  }\n  if (Notification.permission === \"denied\") {\n    return \"denied\";\n  }\n  try {\n    const permission = await Notification.requestPermission();\n    return permission;\n  } catch (error) {\n    console.error(\"–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:\", error);\n    return \"denied\";\n  }\n};\n\n/**\n * –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ\n * @returns {Promise<boolean>} - true –µ—Å–ª–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ, false –µ—Å–ª–∏ –Ω–µ—Ç\n */\nexport const requestPersistentStorage = async () => {\n  if (!(\"storage\" in navigator) || !(\"persist\" in navigator.storage)) {\n    console.log(\"Persistent Storage –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è\");\n    return false;\n  }\n  try {\n    const persistent = await navigator.storage.persist();\n    console.log(`–ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ: ${persistent ? \"—Ä–∞–∑—Ä–µ—à–µ–Ω–æ\" : \"–æ—Ç–∫–ª–æ–Ω–µ–Ω–æ\"}`);\n    return persistent;\n  } catch (error) {\n    console.error(\"–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞:\", error);\n    return false;\n  }\n};\n\n/**\n * –ü–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–≤–æ—Ç–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞\n * @returns {Promise<Object>} - { quota: number, usage: number, usageDetails?: Object }\n */\nexport const getStorageEstimate = async () => {\n  if (!(\"storage\" in navigator) || !(\"estimate\" in navigator.storage)) {\n    console.log(\"Storage API –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è\");\n    return null;\n  }\n  try {\n    const estimate = await navigator.storage.estimate();\n    return {\n      quota: estimate.quota,\n      usage: estimate.usage,\n      usageDetails: estimate.usageDetails\n    };\n  } catch (error) {\n    console.error(\"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ:\", error);\n    return null;\n  }\n};\n\n/**\n * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ HTTPS\n * @returns {boolean}\n */\nexport const isHTTPS = () => {\n  return window.location.protocol === \"https:\" || window.location.hostname === \"localhost\";\n};\n\n/**\n * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è PWA\n * @returns {Promise<Object>} - –û–±—ä–µ–∫—Ç —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π\n */\nexport const checkAllPermissions = async () => {\n  const results = {\n    https: isHTTPS(),\n    permissionsAPI: isPermissionsAPISupported(),\n    getUserMedia: isGetUserMediaSupported(),\n    camera: \"unknown\",\n    notifications: Notification.permission,\n    persistentStorage: false,\n    storageEstimate: null\n  };\n\n  // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã\n  if (isPermissionsAPISupported()) {\n    try {\n      results.camera = await checkPermission(\"camera\");\n    } catch (error) {\n      results.camera = \"unsupported\";\n    }\n  }\n\n  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ\n  if (\"storage\" in navigator && \"persisted\" in navigator.storage) {\n    try {\n      results.persistentStorage = await navigator.storage.persisted();\n    } catch (error) {\n      results.persistentStorage = false;\n    }\n  }\n\n  // –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ\n  results.storageEstimate = await getStorageEstimate();\n  return results;\n};\n\n/**\n * –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è—Ö\n * @param {Object} permissions - –†–µ–∑—É–ª—å—Ç–∞—Ç checkAllPermissions()\n */\nexport const displayPermissionsInfo = permissions => {\n  console.group(\"üîê –°—Ç–∞—Ç—É—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π PWA\");\n  console.log(`üì° HTTPS: ${permissions.https ? \"‚úÖ\" : \"‚ùå\"}`);\n  console.log(`üîß Permissions API: ${permissions.permissionsAPI ? \"‚úÖ\" : \"‚ùå\"}`);\n  console.log(`üì∑ getUserMedia: ${permissions.getUserMedia ? \"‚úÖ\" : \"‚ùå\"}`);\n  console.log(`üì∏ –ö–∞–º–µ—Ä–∞: ${getPermissionEmoji(permissions.camera)} ${permissions.camera}`);\n  console.log(`üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: ${getPermissionEmoji(permissions.notifications)} ${permissions.notifications}`);\n  console.log(`üíæ –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ: ${permissions.persistentStorage ? \"‚úÖ\" : \"‚ùå\"}`);\n  if (permissions.storageEstimate) {\n    const usedMB = Math.round(permissions.storageEstimate.usage / 1024 / 1024);\n    const totalMB = Math.round(permissions.storageEstimate.quota / 1024 / 1024);\n    console.log(`üìä –•—Ä–∞–Ω–∏–ª–∏—â–µ: ${usedMB}MB / ${totalMB}MB`);\n  }\n  console.groupEnd();\n};\n\n/**\n * –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —ç–º–æ–¥–∑–∏ –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è\n * @param {string} permission - –°—Ç–∞—Ç—É—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è\n * @returns {string} - –≠–º–æ–¥–∑–∏\n */\nconst getPermissionEmoji = permission => {\n  switch (permission) {\n    case \"granted\":\n      return \"‚úÖ\";\n    case \"denied\":\n      return \"‚ùå\";\n    case \"prompt\":\n      return \"‚ùì\";\n    case \"unsupported\":\n      return \"üö´\";\n    default:\n      return \"‚ùì\";\n  }\n};","map":{"version":3,"names":["isPermissionsAPISupported","navigator","isGetUserMediaSupported","mediaDevices","getUserMedia","checkPermission","permission","console","log","result","permissions","query","name","state","error","requestCameraAccess","constraints","success","defaultConstraints","video","facingMode","width","ideal","height","audio","finalConstraints","stream","errorMessage","requestNotificationPermission","window","Notification","requestPermission","requestPersistentStorage","storage","persistent","persist","getStorageEstimate","estimate","quota","usage","usageDetails","isHTTPS","location","protocol","hostname","checkAllPermissions","results","https","permissionsAPI","camera","notifications","persistentStorage","storageEstimate","persisted","displayPermissionsInfo","group","getPermissionEmoji","usedMB","Math","round","totalMB","groupEnd"],"sources":["/Users/tigrotigro/Projects/Hakaton/pwaexample/src/utils/permissions.js"],"sourcesContent":["// –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º–∏ PWA\n\n/**\n * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É Permissions API\n */\nexport const isPermissionsAPISupported = () => {\n  return \"permissions\" in navigator;\n};\n\n/**\n * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É getUserMedia (–∫–∞–º–µ—Ä–∞/–º–∏–∫—Ä–æ—Ñ–æ–Ω)\n */\nexport const isGetUserMediaSupported = () => {\n  return !!(navigator.mediaDevices && navigator.mediaDevices.getUserMedia);\n};\n\n/**\n * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è\n * @param {string} permission - –ù–∞–∑–≤–∞–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è ('camera', 'microphone', 'notifications', etc.)\n * @returns {Promise<string>} - 'granted', 'denied', 'prompt', –∏–ª–∏ 'unsupported'\n */\nexport const checkPermission = async (permission) => {\n  if (!isPermissionsAPISupported()) {\n    console.log(\"Permissions API –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è\");\n    return \"unsupported\";\n  }\n\n  try {\n    const result = await navigator.permissions.query({ name: permission });\n    return result.state;\n  } catch (error) {\n    console.error(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è ${permission}:`, error);\n    return \"unsupported\";\n  }\n};\n\n/**\n * –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ\n * @param {Object} constraints - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è –∫–∞–º–µ—Ä—ã\n * @returns {Promise<Object>} - { success: boolean, stream?: MediaStream, error?: string }\n */\nexport const requestCameraAccess = async (constraints = {}) => {\n  if (!isGetUserMediaSupported()) {\n    return {\n      success: false,\n      error: \"getUserMedia –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ —ç—Ç–æ–º –±—Ä–∞—É–∑–µ—Ä–µ\",\n    };\n  }\n\n  const defaultConstraints = {\n    video: {\n      facingMode: \"environment\", // –ó–∞–¥–Ω—è—è –∫–∞–º–µ—Ä–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é\n      width: { ideal: 1280 },\n      height: { ideal: 720 },\n    },\n    audio: false,\n  };\n\n  const finalConstraints = { ...defaultConstraints, ...constraints };\n\n  try {\n    const stream = await navigator.mediaDevices.getUserMedia(finalConstraints);\n    return {\n      success: true,\n      stream: stream,\n    };\n  } catch (error) {\n    let errorMessage = \"–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ\";\n\n    switch (error.name) {\n      case \"NotAllowedError\":\n        errorMessage =\n          \"–î–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ –∑–∞–ø—Ä–µ—â–µ–Ω. –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±—Ä–∞—É–∑–µ—Ä–∞.\";\n        break;\n      case \"NotFoundError\":\n        errorMessage = \"–ö–∞–º–µ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –Ω–∞ —ç—Ç–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ\";\n        break;\n      case \"NotReadableError\":\n        errorMessage = \"–ö–∞–º–µ—Ä–∞ –∑–∞–Ω—è—Ç–∞ –¥—Ä—É–≥–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º\";\n        break;\n      case \"OverconstrainedError\":\n        errorMessage = \"–ó–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–∞–º–µ—Ä—ã –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è\";\n        break;\n      case \"SecurityError\":\n        errorMessage =\n          \"–î–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –ø–æ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS.\";\n        break;\n      case \"AbortError\":\n        errorMessage = \"–ó–∞–ø—Ä–æ—Å –∫ –∫–∞–º–µ—Ä–µ –±—ã–ª –ø—Ä–µ—Ä–≤–∞–Ω\";\n        break;\n      default:\n        errorMessage = \"–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ\";\n        break;\n    }\n\n    return {\n      success: false,\n      error: errorMessage,\n    };\n  }\n};\n\n/**\n * –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è\n * @returns {Promise<string>} - 'granted', 'denied', –∏–ª–∏ 'default'\n */\nexport const requestNotificationPermission = async () => {\n  if (!(\"Notification\" in window)) {\n    console.log(\"–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è\");\n    return \"unsupported\";\n  }\n\n  if (Notification.permission === \"granted\") {\n    return \"granted\";\n  }\n\n  if (Notification.permission === \"denied\") {\n    return \"denied\";\n  }\n\n  try {\n    const permission = await Notification.requestPermission();\n    return permission;\n  } catch (error) {\n    console.error(\"–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:\", error);\n    return \"denied\";\n  }\n};\n\n/**\n * –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ\n * @returns {Promise<boolean>} - true –µ—Å–ª–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ, false –µ—Å–ª–∏ –Ω–µ—Ç\n */\nexport const requestPersistentStorage = async () => {\n  if (!(\"storage\" in navigator) || !(\"persist\" in navigator.storage)) {\n    console.log(\"Persistent Storage –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è\");\n    return false;\n  }\n\n  try {\n    const persistent = await navigator.storage.persist();\n    console.log(\n      `–ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ: ${persistent ? \"—Ä–∞–∑—Ä–µ—à–µ–Ω–æ\" : \"–æ—Ç–∫–ª–æ–Ω–µ–Ω–æ\"}`\n    );\n    return persistent;\n  } catch (error) {\n    console.error(\"–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞:\", error);\n    return false;\n  }\n};\n\n/**\n * –ü–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–≤–æ—Ç–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞\n * @returns {Promise<Object>} - { quota: number, usage: number, usageDetails?: Object }\n */\nexport const getStorageEstimate = async () => {\n  if (!(\"storage\" in navigator) || !(\"estimate\" in navigator.storage)) {\n    console.log(\"Storage API –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è\");\n    return null;\n  }\n\n  try {\n    const estimate = await navigator.storage.estimate();\n    return {\n      quota: estimate.quota,\n      usage: estimate.usage,\n      usageDetails: estimate.usageDetails,\n    };\n  } catch (error) {\n    console.error(\"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ:\", error);\n    return null;\n  }\n};\n\n/**\n * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ HTTPS\n * @returns {boolean}\n */\nexport const isHTTPS = () => {\n  return (\n    window.location.protocol === \"https:\" ||\n    window.location.hostname === \"localhost\"\n  );\n};\n\n/**\n * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è PWA\n * @returns {Promise<Object>} - –û–±—ä–µ–∫—Ç —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π\n */\nexport const checkAllPermissions = async () => {\n  const results = {\n    https: isHTTPS(),\n    permissionsAPI: isPermissionsAPISupported(),\n    getUserMedia: isGetUserMediaSupported(),\n    camera: \"unknown\",\n    notifications: Notification.permission,\n    persistentStorage: false,\n    storageEstimate: null,\n  };\n\n  // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã\n  if (isPermissionsAPISupported()) {\n    try {\n      results.camera = await checkPermission(\"camera\");\n    } catch (error) {\n      results.camera = \"unsupported\";\n    }\n  }\n\n  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ\n  if (\"storage\" in navigator && \"persisted\" in navigator.storage) {\n    try {\n      results.persistentStorage = await navigator.storage.persisted();\n    } catch (error) {\n      results.persistentStorage = false;\n    }\n  }\n\n  // –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ\n  results.storageEstimate = await getStorageEstimate();\n\n  return results;\n};\n\n/**\n * –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è—Ö\n * @param {Object} permissions - –†–µ–∑—É–ª—å—Ç–∞—Ç checkAllPermissions()\n */\nexport const displayPermissionsInfo = (permissions) => {\n  console.group(\"üîê –°—Ç–∞—Ç—É—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π PWA\");\n\n  console.log(`üì° HTTPS: ${permissions.https ? \"‚úÖ\" : \"‚ùå\"}`);\n  console.log(\n    `üîß Permissions API: ${permissions.permissionsAPI ? \"‚úÖ\" : \"‚ùå\"}`\n  );\n  console.log(`üì∑ getUserMedia: ${permissions.getUserMedia ? \"‚úÖ\" : \"‚ùå\"}`);\n  console.log(\n    `üì∏ –ö–∞–º–µ—Ä–∞: ${getPermissionEmoji(permissions.camera)} ${permissions.camera}`\n  );\n  console.log(\n    `üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: ${getPermissionEmoji(permissions.notifications)} ${\n      permissions.notifications\n    }`\n  );\n  console.log(\n    `üíæ –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ: ${permissions.persistentStorage ? \"‚úÖ\" : \"‚ùå\"}`\n  );\n\n  if (permissions.storageEstimate) {\n    const usedMB = Math.round(permissions.storageEstimate.usage / 1024 / 1024);\n    const totalMB = Math.round(permissions.storageEstimate.quota / 1024 / 1024);\n    console.log(`üìä –•—Ä–∞–Ω–∏–ª–∏—â–µ: ${usedMB}MB / ${totalMB}MB`);\n  }\n\n  console.groupEnd();\n};\n\n/**\n * –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —ç–º–æ–¥–∑–∏ –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è\n * @param {string} permission - –°—Ç–∞—Ç—É—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è\n * @returns {string} - –≠–º–æ–¥–∑–∏\n */\nconst getPermissionEmoji = (permission) => {\n  switch (permission) {\n    case \"granted\":\n      return \"‚úÖ\";\n    case \"denied\":\n      return \"‚ùå\";\n    case \"prompt\":\n      return \"‚ùì\";\n    case \"unsupported\":\n      return \"üö´\";\n    default:\n      return \"‚ùì\";\n  }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}