{"ast":null,"code":"import React,{useCallback,useState,useRef}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PhotoUploader=_ref=>{let{onPhotoUpload}=_ref;const[isDragOver,setIsDragOver]=useState(false);const[isUploading,setIsUploading]=useState(false);const[isCapturing,setIsCapturing]=useState(false);const fileInputRef=useRef(null);const videoRef=useRef(null);const canvasRef=useRef(null);const streamRef=useRef(null);const handleFileSelect=useCallback(async files=>{if(!files||files.length===0)return;setIsUploading(true);try{for(let i=0;i<files.length;i++){const file=files[i];// –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ\nif(!file.type.startsWith(\"image/\")){alert(\"\\u0424\\u0430\\u0439\\u043B \".concat(file.name,\" \\u043D\\u0435 \\u044F\\u0432\\u043B\\u044F\\u0435\\u0442\\u0441\\u044F \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435\\u043C\"));continue;}// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (–º–∞–∫—Å–∏–º—É–º 10MB)\nif(file.size>10*1024*1024){alert(\"\\u0424\\u0430\\u0439\\u043B \".concat(file.name,\" \\u0441\\u043B\\u0438\\u0448\\u043A\\u043E\\u043C \\u0431\\u043E\\u043B\\u044C\\u0448\\u043E\\u0439 (\\u043C\\u0430\\u043A\\u0441\\u0438\\u043C\\u0443\\u043C 10MB)\"));continue;}await onPhotoUpload(file);}}catch(error){console.error(\"–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤:\",error);alert(\"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–æ–≤\");}finally{setIsUploading(false);}},[onPhotoUpload]);const handleDrop=useCallback(e=>{e.preventDefault();setIsDragOver(false);const files=Array.from(e.dataTransfer.files);handleFileSelect(files);},[handleFileSelect]);const handleDragOver=useCallback(e=>{e.preventDefault();setIsDragOver(true);},[]);const handleDragLeave=useCallback(e=>{e.preventDefault();setIsDragOver(false);},[]);const handleFileInputChange=useCallback(e=>{const files=Array.from(e.target.files);handleFileSelect(files);// –°–±—Ä–∞—Å—ã–≤–∞–µ–º input –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ —Ç–æ–≥–æ –∂–µ —Ñ–∞–π–ª–∞\ne.target.value=\"\";},[handleFileSelect]);const handleButtonClick=useCallback(()=>{var _fileInputRef$current;(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();},[]);const startCamera=useCallback(async()=>{try{setIsCapturing(true);const stream=await navigator.mediaDevices.getUserMedia({video:{facingMode:\"environment\",// –ò—Å–ø–æ–ª—å–∑—É–µ–º –∑–∞–¥–Ω—é—é –∫–∞–º–µ—Ä—É\nwidth:{ideal:1280},height:{ideal:720}}});streamRef.current=stream;if(videoRef.current){videoRef.current.srcObject=stream;}}catch(error){console.error(\"–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ:\",error);alert(\"–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è.\");setIsCapturing(false);}},[]);const stopCamera=useCallback(()=>{if(streamRef.current){streamRef.current.getTracks().forEach(track=>track.stop());streamRef.current=null;}setIsCapturing(false);},[]);const capturePhoto=useCallback(async()=>{if(!videoRef.current||!canvasRef.current)return;const video=videoRef.current;const canvas=canvasRef.current;const ctx=canvas.getContext(\"2d\");// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä—ã canvas –∫–∞–∫ —É –≤–∏–¥–µ–æ\ncanvas.width=video.videoWidth;canvas.height=video.videoHeight;// –†–∏—Å—É–µ–º –∫–∞–¥—Ä –∏–∑ –≤–∏–¥–µ–æ –Ω–∞ canvas\nctx.drawImage(video,0,0,canvas.width,canvas.height);// –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º canvas –≤ Blob\nreturn new Promise(resolve=>{canvas.toBlob(blob=>{if(blob){const file=new File([blob],\"photo_\".concat(Date.now(),\".jpg\"),{type:\"image/jpeg\"});resolve(file);}else{resolve(null);}},\"image/jpeg\",0.8);});},[]);const handleCapture=useCallback(async()=>{try{const file=await capturePhoto();if(file){await handleFileSelect([file]);stopCamera();}}catch(error){console.error(\"–û—à–∏–±–∫–∞ —Å—ä–µ–º–∫–∏ —Ñ–æ—Ç–æ:\",error);alert(\"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å—ä–µ–º–∫–µ —Ñ–æ—Ç–æ\");}},[capturePhoto,handleFileSelect,stopCamera]);return/*#__PURE__*/_jsx(\"div\",{children:!isCapturing?/*#__PURE__*/_jsxs(\"div\",{className:\"upload-area \".concat(isDragOver?\"dragover\":\"\"),onDrop:handleDrop,onDragOver:handleDragOver,onDragLeave:handleDragLeave,children:[/*#__PURE__*/_jsx(\"input\",{ref:fileInputRef,type:\"file\",multiple:true,accept:\"image/*\",onChange:handleFileInputChange,className:\"upload-input\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\uD83D\\uDCF7 \\u041F\\u0435\\u0440\\u0435\\u0442\\u0430\\u0449\\u0438\\u0442\\u0435 \\u0444\\u043E\\u0442\\u043E\\u0433\\u0440\\u0430\\u0444\\u0438\\u0438 \\u0441\\u044E\\u0434\\u0430 \\u0438\\u043B\\u0438\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:\"10px\",justifyContent:\"center\",flexWrap:\"wrap\"},children:[/*#__PURE__*/_jsx(\"button\",{className:\"upload-button\",onClick:handleButtonClick,disabled:isUploading,children:isUploading?\"–ó–∞–≥—Ä—É–∑–∫–∞...\":\"–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª—ã\"}),/*#__PURE__*/_jsx(\"button\",{className:\"upload-button\",onClick:startCamera,disabled:isUploading,style:{backgroundColor:\"#28a745\"},children:\"\\uD83D\\uDCF8 \\u0421\\u0434\\u0435\\u043B\\u0430\\u0442\\u044C \\u0444\\u043E\\u0442\\u043E\"})]})]}),/*#__PURE__*/_jsx(\"p\",{style:{marginTop:\"10px\",fontSize:\"14px\",color:\"#666\"},children:\"\\u041F\\u043E\\u0434\\u0434\\u0435\\u0440\\u0436\\u0438\\u0432\\u0430\\u044E\\u0442\\u0441\\u044F \\u0444\\u043E\\u0440\\u043C\\u0430\\u0442\\u044B: JPG, PNG, GIF, WebP\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"camera-container\",style:{background:\"white\",borderRadius:\"10px\",padding:\"20px\",textAlign:\"center\",boxShadow:\"0 2px 10px rgba(0,0,0,0.1)\"},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCF8 \\u041A\\u0430\\u043C\\u0435\\u0440\\u0430\"}),/*#__PURE__*/_jsxs(\"div\",{style:{position:\"relative\",marginBottom:\"20px\"},children:[/*#__PURE__*/_jsx(\"video\",{ref:videoRef,autoPlay:true,playsInline:true,style:{width:\"100%\",maxWidth:\"400px\",height:\"auto\",borderRadius:\"10px\",transform:\"scaleX(-1)\"// –ó–µ—Ä–∫–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ\n}}),/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,style:{display:\"none\"}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:\"10px\",justifyContent:\"center\"},children:[/*#__PURE__*/_jsx(\"button\",{className:\"upload-button\",onClick:handleCapture,style:{backgroundColor:\"#dc3545\"},children:\"\\uD83D\\uDCF7 \\u0421\\u0434\\u0435\\u043B\\u0430\\u0442\\u044C \\u0441\\u043D\\u0438\\u043C\\u043E\\u043A\"}),/*#__PURE__*/_jsx(\"button\",{className:\"upload-button\",onClick:stopCamera,style:{backgroundColor:\"#6c757d\"},children:\"\\u274C \\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"})]})]})});};export default PhotoUploader;","map":{"version":3,"names":["React","useCallback","useState","useRef","jsx","_jsx","jsxs","_jsxs","PhotoUploader","_ref","onPhotoUpload","isDragOver","setIsDragOver","isUploading","setIsUploading","isCapturing","setIsCapturing","fileInputRef","videoRef","canvasRef","streamRef","handleFileSelect","files","length","i","file","type","startsWith","alert","concat","name","size","error","console","handleDrop","e","preventDefault","Array","from","dataTransfer","handleDragOver","handleDragLeave","handleFileInputChange","target","value","handleButtonClick","_fileInputRef$current","current","click","startCamera","stream","navigator","mediaDevices","getUserMedia","video","facingMode","width","ideal","height","srcObject","stopCamera","getTracks","forEach","track","stop","capturePhoto","canvas","ctx","getContext","videoWidth","videoHeight","drawImage","Promise","resolve","toBlob","blob","File","Date","now","handleCapture","children","className","onDrop","onDragOver","onDragLeave","ref","multiple","accept","onChange","style","display","gap","justifyContent","flexWrap","onClick","disabled","backgroundColor","marginTop","fontSize","color","background","borderRadius","padding","textAlign","boxShadow","position","marginBottom","autoPlay","playsInline","maxWidth","transform"],"sources":["/Users/tigrotigro/Projects/Hakaton/pwaexample/src/components/PhotoUploader.js"],"sourcesContent":["import React, { useCallback, useState, useRef } from \"react\";\n\nconst PhotoUploader = ({ onPhotoUpload }) => {\n  const [isDragOver, setIsDragOver] = useState(false);\n  const [isUploading, setIsUploading] = useState(false);\n  const [isCapturing, setIsCapturing] = useState(false);\n  const fileInputRef = useRef(null);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const streamRef = useRef(null);\n\n  const handleFileSelect = useCallback(\n    async (files) => {\n      if (!files || files.length === 0) return;\n\n      setIsUploading(true);\n      try {\n        for (let i = 0; i < files.length; i++) {\n          const file = files[i];\n\n          // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ\n          if (!file.type.startsWith(\"image/\")) {\n            alert(`–§–∞–π–ª ${file.name} –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º`);\n            continue;\n          }\n\n          // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (–º–∞–∫—Å–∏–º—É–º 10MB)\n          if (file.size > 10 * 1024 * 1024) {\n            alert(`–§–∞–π–ª ${file.name} —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π (–º–∞–∫—Å–∏–º—É–º 10MB)`);\n            continue;\n          }\n\n          await onPhotoUpload(file);\n        }\n      } catch (error) {\n        console.error(\"–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤:\", error);\n        alert(\"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–æ–≤\");\n      } finally {\n        setIsUploading(false);\n      }\n    },\n    [onPhotoUpload]\n  );\n\n  const handleDrop = useCallback(\n    (e) => {\n      e.preventDefault();\n      setIsDragOver(false);\n      const files = Array.from(e.dataTransfer.files);\n      handleFileSelect(files);\n    },\n    [handleFileSelect]\n  );\n\n  const handleDragOver = useCallback((e) => {\n    e.preventDefault();\n    setIsDragOver(true);\n  }, []);\n\n  const handleDragLeave = useCallback((e) => {\n    e.preventDefault();\n    setIsDragOver(false);\n  }, []);\n\n  const handleFileInputChange = useCallback(\n    (e) => {\n      const files = Array.from(e.target.files);\n      handleFileSelect(files);\n      // –°–±—Ä–∞—Å—ã–≤–∞–µ–º input –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ —Ç–æ–≥–æ –∂–µ —Ñ–∞–π–ª–∞\n      e.target.value = \"\";\n    },\n    [handleFileSelect]\n  );\n\n  const handleButtonClick = useCallback(() => {\n    fileInputRef.current?.click();\n  }, []);\n\n  const startCamera = useCallback(async () => {\n    try {\n      setIsCapturing(true);\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          facingMode: \"environment\", // –ò—Å–ø–æ–ª—å–∑—É–µ–º –∑–∞–¥–Ω—é—é –∫–∞–º–µ—Ä—É\n          width: { ideal: 1280 },\n          height: { ideal: 720 },\n        },\n      });\n\n      streamRef.current = stream;\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n      }\n    } catch (error) {\n      console.error(\"–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ:\", error);\n      alert(\"–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è.\");\n      setIsCapturing(false);\n    }\n  }, []);\n\n  const stopCamera = useCallback(() => {\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach((track) => track.stop());\n      streamRef.current = null;\n    }\n    setIsCapturing(false);\n  }, []);\n\n  const capturePhoto = useCallback(async () => {\n    if (!videoRef.current || !canvasRef.current) return;\n\n    const video = videoRef.current;\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n\n    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä—ã canvas –∫–∞–∫ —É –≤–∏–¥–µ–æ\n    canvas.width = video.videoWidth;\n    canvas.height = video.videoHeight;\n\n    // –†–∏—Å—É–µ–º –∫–∞–¥—Ä –∏–∑ –≤–∏–¥–µ–æ –Ω–∞ canvas\n    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n\n    // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º canvas –≤ Blob\n    return new Promise((resolve) => {\n      canvas.toBlob(\n        (blob) => {\n          if (blob) {\n            const file = new File([blob], `photo_${Date.now()}.jpg`, {\n              type: \"image/jpeg\",\n            });\n            resolve(file);\n          } else {\n            resolve(null);\n          }\n        },\n        \"image/jpeg\",\n        0.8\n      );\n    });\n  }, []);\n\n  const handleCapture = useCallback(async () => {\n    try {\n      const file = await capturePhoto();\n      if (file) {\n        await handleFileSelect([file]);\n        stopCamera();\n      }\n    } catch (error) {\n      console.error(\"–û—à–∏–±–∫–∞ —Å—ä–µ–º–∫–∏ —Ñ–æ—Ç–æ:\", error);\n      alert(\"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å—ä–µ–º–∫–µ —Ñ–æ—Ç–æ\");\n    }\n  }, [capturePhoto, handleFileSelect, stopCamera]);\n\n  return (\n    <div>\n      {!isCapturing ? (\n        <div\n          className={`upload-area ${isDragOver ? \"dragover\" : \"\"}`}\n          onDrop={handleDrop}\n          onDragOver={handleDragOver}\n          onDragLeave={handleDragLeave}\n        >\n          <input\n            ref={fileInputRef}\n            type=\"file\"\n            multiple\n            accept=\"image/*\"\n            onChange={handleFileInputChange}\n            className=\"upload-input\"\n          />\n\n          <div>\n            <p>üì∑ –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Å—é–¥–∞ –∏–ª–∏</p>\n            <div\n              style={{\n                display: \"flex\",\n                gap: \"10px\",\n                justifyContent: \"center\",\n                flexWrap: \"wrap\",\n              }}\n            >\n              <button\n                className=\"upload-button\"\n                onClick={handleButtonClick}\n                disabled={isUploading}\n              >\n                {isUploading ? \"–ó–∞–≥—Ä—É–∑–∫–∞...\" : \"–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª—ã\"}\n              </button>\n              <button\n                className=\"upload-button\"\n                onClick={startCamera}\n                disabled={isUploading}\n                style={{ backgroundColor: \"#28a745\" }}\n              >\n                üì∏ –°–¥–µ–ª–∞—Ç—å —Ñ–æ—Ç–æ\n              </button>\n            </div>\n          </div>\n\n          <p style={{ marginTop: \"10px\", fontSize: \"14px\", color: \"#666\" }}>\n            –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ñ–æ—Ä–º–∞—Ç—ã: JPG, PNG, GIF, WebP\n          </p>\n        </div>\n      ) : (\n        <div\n          className=\"camera-container\"\n          style={{\n            background: \"white\",\n            borderRadius: \"10px\",\n            padding: \"20px\",\n            textAlign: \"center\",\n            boxShadow: \"0 2px 10px rgba(0,0,0,0.1)\",\n          }}\n        >\n          <h3>üì∏ –ö–∞–º–µ—Ä–∞</h3>\n          <div style={{ position: \"relative\", marginBottom: \"20px\" }}>\n            <video\n              ref={videoRef}\n              autoPlay\n              playsInline\n              style={{\n                width: \"100%\",\n                maxWidth: \"400px\",\n                height: \"auto\",\n                borderRadius: \"10px\",\n                transform: \"scaleX(-1)\", // –ó–µ—Ä–∫–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ\n              }}\n            />\n            <canvas ref={canvasRef} style={{ display: \"none\" }} />\n          </div>\n          <div\n            style={{ display: \"flex\", gap: \"10px\", justifyContent: \"center\" }}\n          >\n            <button\n              className=\"upload-button\"\n              onClick={handleCapture}\n              style={{ backgroundColor: \"#dc3545\" }}\n            >\n              üì∑ –°–¥–µ–ª–∞—Ç—å —Å–Ω–∏–º–æ–∫\n            </button>\n            <button\n              className=\"upload-button\"\n              onClick={stopCamera}\n              style={{ backgroundColor: \"#6c757d\" }}\n            >\n              ‚ùå –û—Ç–º–µ–Ω–∞\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default PhotoUploader;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}